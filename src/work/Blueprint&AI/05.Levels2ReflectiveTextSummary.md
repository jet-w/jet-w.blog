---
title: 06. Summary for Reflective Level
index: true
icon: circle-dot
author: Haiyue
date: 2024-01-22
category:
  - work
---
## Approaches for prompt fine-tuning
| ID |  Thought |  Effect | Code |
| -- | -- | -- | -- |
| 1 | Using the definition to do directly | Result is not good | [Code on Google Colab](https://colab.research.google.com/drive/1EPxMGd9swV3lnJuVThK3cAepl6zrlX0w?usp=sharing)<br/> <br/>[More details](05.Levels2ReflectiveText)|
| 2 | Decompose the level definition, then to find the best match as the result based on the definition of levels and the question. <br/> Using lots of match methods to finetune.| Result is not good | [Code on Google Colab](https://colab.research.google.com/drive/1ZIb76fPZZvqIpcJeZG81reGh9ftARau9?usp=sharing)<br/> <br/>[More details](05.Levels2ReflectiveText)|
| 3 | Finetune the model on OpenAI, and then to identify the level based on level definition and question<br/> Using three approaches to sample data for training, <br/> 1. Sample data from the shifting level dataset (Grouped sampling from each level randomly) <br/> 2. Sample data from overall dataset automatically (Grouped sampling from each level randomly) <br/> 3. Group sample data from all data randomly.  | Result is still not good enough | [Code on Google Colab](https://colab.research.google.com/drive/1Sx37U_Yp_BBORjVw8o2vr3ETzc6gDD2-?usp=sharing)|
| 4 | Using the GPT to summarize the definition for levels, then using the new definitions to create new prompt for getting result | Done | [Code on Google Colab](https://colab.research.google.com/drive/1jMRCks-97kDnceDAKg1Cjz-Wo7pG6q0j?usp=sharing)|
| 5 | Summarize the definition & finetuning groups data | Under the way | [Code on Google Colab](https://colab.research.google.com/drive/1Yumr8PVfMXH9P_ty5BcDwskDMP4tEtrm?usp=sharing)|


## Prompt fine-tuning flowchart
![Alt text](/data/HS/data/fine-tuning-approach.png)


## Statistical consistency
This part will try to test the statistical consistency for different original levels. 

### Statistical consistency (Final 2)
<div>
<div style="display:flex;">
<div style="flex:1"> 

![12.5%](/data/HS/reflection_classification/f2/1st.png)
</div>
<div style="flex:1"> 

![2.5%](/data/HS/reflection_classification/f2/2nd.png)
</div>
<div style="flex:1"> 

![7.5%](/data/HS/reflection_classification/f2/3rd.png)
</div>
</div>
</div>
<div>
<div style="display:flex;">
<div style="flex:1"> 

![7.5%](/data/HS/reflection_classification/f2/4th.png)
</div>
<div style="flex:1"> 

![15%](/data/HS/reflection_classification/f2/5th.png)
</div>
<div style="flex:1"> 

</div>
</div>
</div>
According to the graphs above, we can find the accuracy of classification for level 2 is very low. Most items shift from level 2 to level 3. 
Although the accuracy is low, the statistical result shows the shifting trend(<span style="color:orange">most shifting from level 2 to level 3.</span>) is stable.

### Statistical consistency (Final 3)
<div>
<div style="display:flex;">
<div style="flex:1"> 

![57.5%](/data/HS/reflection_classification/f3/1st.png)
</div>
<div style="flex:1"> 

![67.5%](/data/HS/reflection_classification/f3/2nd.png)
</div>
<div style="flex:1"> 

![65%](/data/HS/reflection_classification/f3/3rd.png)
</div>
</div>
</div>


<div>
<div style="display:flex;">
<div style="flex:1"> 

![50%](/data/HS/reflection_classification/f3/4th.png)
</div>
<div style="flex:1"> 

![67.5%](/data/HS/reflection_classification/f3/5th.png)
</div>
<div style="flex:1"> 

</div>
</div>
</div>
According to the graphs above, we can find the accuracy of classification for level 3 is low but it can be accepted for the initial step. Most items keep the original level, for the shifting items, most of them shift from 3 to 4. According to the graphs above, most accuracy is around 60%, the statistical result for accuracy and shifting trend are consistent.

### Statistical consistency (Final 4)
<div>
<div style="display:flex;">
<div style="flex:1"> 

![60%](/data/HS/reflection_classification/f4/1st.png)
</div>
<div style="flex:1"> 

![47.5%](/data/HS/reflection_classification/f4/2nd.png)
</div>
<div style="flex:1"> 

![57.5%](/data/HS/reflection_classification/f4/3rd.png)
</div>
</div>
</div>
<div>
<div style="display:flex;">
<div style="flex:1"> 

![60%](/data/HS/reflection_classification/f4/4th.png)
</div>
<div style="flex:1"> 

![62.5%](/data/HS/reflection_classification/f4/5th.png)
</div>
<div style="flex:1"> 

</div>
</div>
</div>

According to the graphs above, we can find the accuracy of classification for level 4 is low but it can be accepted for the initial step (Actually, the accuracy decreases rapidly after integrating the level 3. The accuracy could reach 90% before integrating the level 3 prompt). Most items keep the original level. According to the graphs above, most accuracy is around 60%, so the accuracy of the statistical result is consistent.

